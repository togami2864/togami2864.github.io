import{f as G,g as H,A as K,B as X,C as Y,D as J}from"../modules/unplugin-icons-Bmxo9SWr.js";import{a6 as O,z as h,d as E,o as n,c,i as P,K as e,t as T,E as B,Y as Q,N as U,X as Z,a7 as ee,a8 as te,b as k,e as t,l as o,k as y,h as M,g as se,x as oe,F as ne}from"../modules/vue-DCImR6b2.js";import{k as re,j as ae,q as ie,s as le,w as ce,x as ue,y as me,z as de,A as pe,B as _e,_ as fe}from"../index-RshNyr5e.js";import{c as ve,u as xe,b as A,S as ge}from"./SlideWrapper-C9egaoW1.js";import{r as ke,u as ye,a as he,S as Ce,_ as be,G as Se,b as we,c as $e,o as ze}from"./shortcuts-h9WFjOfa.js";import{s as Ne}from"../monaco/bundled-types-Cmx93sJm.js";import{_ as Fe,C as Te}from"./NoteDisplay.vue_vue_type_style_index_0_lang-DVL3Ydvz.js";import{_ as Be}from"./DrawingControls.vue_vue_type_style_index_0_lang-B7u20yKQ.js";import{_ as D}from"./IconButton.vue_vue_type_script_setup_true_lang-D-o67DAp.js";import"../modules/shiki-DK3WdXZf.js";import"./title-renderer.md_vue_type_script_setup_true_lang-DRsVrrHx.js";import"./context-BzeIhDjl.js";import"../modules/file-saver-igGfcqei.js";function Me(){const{counter:v,isActive:r,reset:a,pause:u,resume:d}=O(1e3,{controls:!0});return{timer:h(()=>{const m=v.value,C=Math.floor(m%60).toString().padStart(2,"0");return`${Math.floor(m/60).toString().padStart(2,"0")}:${C}`}),isTimerAvctive:r,resetTimer:a,toggleTimer:()=>r.value?u():d()}}const Ae=E({__name:"NoteStatic",props:{no:{},class:{},clicksContext:{}},setup(v){const r=v,{info:a}=ve(r.no);return(u,d)=>{var p,m;return n(),c(Fe,{class:P(r.class),note:(p=e(a))==null?void 0:p.note,"note-html":(m=e(a))==null?void 0:m.noteHTML,"clicks-context":u.clicksContext},null,8,["class","note","note-html","clicks-context"])}}}),De={class:"bg-main h-full slidev-presenter"},Ee={class:"relative grid-section next flex flex-col p-2 lg:p-4"},Pe={key:1,class:"h-full flex justify-center items-center"},Ie={key:0,class:"grid-section note of-auto"},Re={key:1,class:"grid-section note grid grid-rows-[1fr_min-content] overflow-hidden"},je={class:"border-t border-main py-1 px-2 text-sm"},Le={class:"grid-section bottom flex"},Ve={class:"group flex items-center justify-center pl-4 select-none"},We={class:"w-22px cursor-pointer"},qe={class:"group-not-hover:hidden flex flex-col items-center"},Ge={class:"text-2xl px-3 my-auto tabular-nums"},He={class:"progress-bar"},Ke=E({__name:"presenter",setup(v){const r=T();ke(),ye(r),he();const{clicksContext:a,currentSlideNo:u,currentSlideRoute:d,hasNext:p,nextRoute:m,slides:C,getPrimaryClicks:w,total:I}=re(),{isDrawing:R}=xe();ae({title:`Presenter - ${Ne}`}),T(!1);const{timer:j,isTimerAvctive:L,resetTimer:$,toggleTimer:z}=Me(),V=h(()=>C.value.map(g=>ie(g))),i=h(()=>a.value.current<a.value.total?[d.value,a.value.current+1]:p.value?[m.value,0]:null),x=h(()=>i.value&&V.value[i.value[0].no-1]);B(i,()=>{x.value&&i.value&&(x.value.current=i.value[1])},{immediate:!0});const N=Q();return U(()=>{const g=r.value.querySelector("#slide-content"),s=Z(ee()),b=te();B(()=>{if(!b.value||R.value||!ce.value)return;const l=g.getBoundingClientRect(),_=(s.x-l.left)/l.width*100,f=(s.y-l.top)/l.height*100;if(!(_<0||_>100||f<0||f>100))return{x:_,y:f}},l=>{le.cursor=l})}),(g,s)=>{var F;const b=G,l=H,_=K,f=Y,W=J,q=X;return n(),k(ne,null,[t("div",De,[t("div",{class:P(["grid-container",`layout${e(ue)}`])},[t("div",{ref_key:"main",ref:r,class:"relative grid-section main flex flex-col"},[o(A,{key:"main",class:"p-2 lg:p-4 flex-auto","is-main":"",onContextmenu:e(ze)},{default:y(()=>[o(Ce,{"render-context":"presenter"})]),_:1},8,["onContextmenu"]),(n(),c(Te,{key:(F=e(d))==null?void 0:F.no,"clicks-context":e(w)(e(d)),class:"w-full pb2 px4 flex-none"},null,8,["clicks-context"])),s[4]||(s[4]=t("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Current ",-1))],512),t("div",Ee,[i.value&&x.value?(n(),c(A,{key:"next"},{default:y(()=>[(n(),c(ge,{key:i.value[0].no,"clicks-context":x.value,route:i.value[0],"render-context":"previewNext"},null,8,["clicks-context","route"]))]),_:1})):(n(),k("div",Pe,s[5]||(s[5]=[t("div",{class:"text-gray-500"}," End of the presentation ",-1)]))),s[6]||(s[6]=t("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Next ",-1))]),N.value&&e(me)?(n(),k("div",Ie,[o(e(N))])):(n(),k("div",Re,[(n(),c(Ae,{key:`static-${e(u)}`,no:e(u),class:"w-full max-w-full h-full overflow-auto p-2 lg:p-4",style:M({fontSize:`${e(de)}em`}),"clicks-context":e(a)},null,8,["no","style","clicks-context"])),t("div",je,[o(D,{title:"Increase font size",onClick:e(pe)},{default:y(()=>[o(b)]),_:1},8,["onClick"]),o(D,{title:"Decrease font size",onClick:e(_e)},{default:y(()=>[o(l)]),_:1},8,["onClick"]),se("v-if",!0)])])),t("div",Le,[o(be,{persist:!0}),s[7]||(s[7]=t("div",{"flex-auto":""},null,-1)),t("div",Ve,[t("div",We,[o(_,{class:"group-hover:hidden text-xl"}),t("div",qe,[t("div",{class:"relative op-80 hover:op-100",onClick:s[2]||(s[2]=(...S)=>e(z)&&e(z)(...S))},[e(L)?(n(),c(f,{key:0,class:"text-lg"})):(n(),c(W,{key:1}))]),t("div",{class:"op-80 hover:op-100",onClick:s[3]||(s[3]=(...S)=>e($)&&e($)(...S))},[o(q)])])]),t("div",Ge,oe(e(j)),1)])]),(n(),c(Be,{key:2}))],2),t("div",He,[t("div",{class:"progress h-3px bg-primary transition-all",style:M({width:`${(e(u)-1)/(e(I)-1)*100+1}%`})},null,4)])]),o(Se),o(we),o($e)],64)}}}),at=fe(Ke,[["__scopeId","data-v-04f57e7a"]]);export{at as default};
